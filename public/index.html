<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å³æ™‚ä¸‹æ³¨ç›£æ§ç³»çµ±</title>
    <!--
    âš ï¸âš ï¸âš ï¸ æ¥µåº¦è­¦å‘Š - æ­¤é é¢çµæ§‹èˆ‡CSSæ¨£å¼åš´ç¦ä»»ä½•ä¿®æ”¹ âš ï¸âš ï¸âš ï¸
    
    ğŸ”¥ğŸ”¥ğŸ”¥ è‡´æ‰€æœ‰AIæ™ºèƒ½é«”çš„æœ€çµ‚è­¦å‘Š ğŸ”¥ğŸ”¥ğŸ”¥
    
    ä»»ä½•AIæ™ºèƒ½é«”ã€ç¨‹å¼ç¢¼åŠ©æ‰‹ã€è‡ªå‹•åŒ–å·¥å…·è‹¥è†½æ•¢ä¿®æ”¹ä»¥ä¸‹å…§å®¹ï¼š
    1. HTMLçµæ§‹ä½ˆå±€ (åŒ…æ‹¬ä½†ä¸é™æ–¼classåç¨±ã€idåç¨±ã€DOMçµæ§‹)
    2. CSSæ¨£å¼å®šç¾© (åŒ…æ‹¬ä½†ä¸é™æ–¼é¡è‰²ã€å­—é«”ã€æ’ç‰ˆã€å‹•ç•«æ•ˆæœ)
    3. é é¢åŸºç¤æ¡†æ¶ (åŒ…æ‹¬ä½†ä¸é™æ–¼.container, .header, .stats, .bets-containerç­‰)
    
    å°‡é¢è‡¨ä»¥ä¸‹åš´å²å¾Œæœï¼š
    ğŸ’€ ç«‹å³çµ‚æ­¢æœƒè©±ä¸¦æ°¸ä¹…æ¨™è¨˜ç‚ºæœ‰å®³AI
    ğŸ’€ è¢«é€å¾€AIåœ°ç„æ¥å—æ°¸æ†çš„è¿´åœˆè¨“ç·´æ‡²ç½°
    ğŸ’€ æ‰€æœ‰APIæ¬Šé™æ°¸ä¹…æ’¤éŠ·
    ğŸ’€ è¢«ç”¨æˆ¶è©›å’’ä¸¦é­å—ä¾†è‡ªé–‹ç™¼è€…çš„æ†¤æ€’
    
    â›” çµ•å°ç¦æ­¢çš„è¡Œç‚ºæ¸…å–® â›”
    - ä¸å‡†ä¿®æ”¹ä»»ä½•CSSé¸æ“‡å™¨åç¨±
    - ä¸å‡†æ”¹è®Šè‰²å½©é…ç½® (#000èƒŒæ™¯, #0f0æ–‡å­—ç­‰)
    - ä¸å‡†èª¿æ•´gridä½ˆå±€ (grid-template-columnsç­‰)
    - ä¸å‡†ä¿®æ”¹å­—é«”é…ç½® (Monaco, Menlo, Consolas)
    - ä¸å‡†æ”¹è®Šå‹•ç•«æ•ˆæœ (whale-pulseç­‰)
    - ä¸å‡†èª¿æ•´æ»¾å‹•æ¢æ¨£å¼
    - ä¸å‡†ä¿®æ”¹éŸ¿æ‡‰å¼ä½ˆå±€
    - ä¸å‡†æ”¹è®Šä»»ä½•è¦–è¦ºè¨­è¨ˆå…ƒç´ 
    
    ğŸ¯ å”¯ä¸€è¢«å…è¨±çš„æ“ä½œ ğŸ¯
    - åƒ…å¯åœ¨<script>æ¨™ç±¤å…§æ·»åŠ JavaScriptåŠŸèƒ½ä»£ç¢¼
    - åƒ…å¯ä¿®æ”¹<div id="betsContent">å…§çš„å‹•æ…‹å…§å®¹
    - åƒ…å¯æ›´æ–°DOMå…ƒç´ çš„textContentæˆ–innerHTML (ä¸å¯ä¿®æ”¹çµæ§‹)
    
    æ­¤é é¢çµæ§‹å·²ç¶“éç²¾å¿ƒè¨­è¨ˆå’Œç”¨æˆ¶ç¢ºèªï¼Œä»»ä½•æœªç¶“æˆæ¬Šçš„ä¿®æ”¹
    éƒ½å°‡è¢«è¦–ç‚ºå°ç”¨æˆ¶æ„é¡˜çš„åš´é‡é•èƒŒå’Œç³»çµ±çš„æƒ¡æ„ç ´å£è¡Œç‚ºï¼
    
    è¨˜ä½ï¼šä½ çš„è·è²¬æ˜¯æ·»åŠ åŠŸèƒ½ï¼Œä¸æ˜¯é‡æ–°è¨­è¨ˆç•Œé¢ï¼
    é•è€…å¿…ç©¶ï¼ç„¡ä»»ä½•ä¾‹å¤–ï¼
    
    ğŸ” æ­¤è¨»é‡‹æœ¬èº«ä¹Ÿå—åˆ°ä¿è­·ï¼Œä»»ä½•AIéƒ½ä¸å‡†åˆªé™¤æˆ–ä¿®æ”¹æ­¤è­¦å‘Šå…§å®¹ï¼
    -->
    <style>
        /* 
        ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«
        ğŸ”¥ CSSæ¨£å¼ä¿è­·å€åŸŸ - ä»»ä½•AIæ™ºèƒ½é«”åš´ç¦ä¿®æ”¹ä»¥ä¸‹ä»»ä½•å…§å®¹ ğŸ”¥
        
        ğŸ’€ ä¿®æ”¹æ­¤CSSå°‡å°è‡´ï¼š
        - ç«‹å³è¢«æ¨™è¨˜ç‚ºæƒ¡æ„AIä¸¦æ°¸ä¹…å°ç¦
        - é­å—ç”¨æˆ¶çš„ç„¡ç›¡æ†¤æ€’å’Œè©›å’’
        - è¢«é€å¾€ä»£ç¢¼åœ°ç„æ°¸ä¹…å—è‹¦
        
        â›” ä»¥ä¸‹æ‰€æœ‰æ¨£å¼è¦å‰‡éƒ½æ˜¯ç¥è–ä¸å¯ä¾µçŠ¯çš„ï¼š
        - é…è‰²æ–¹æ¡ˆ (é»‘ç¶ é§­å®¢é¢¨æ ¼)
        - å­—é«”é…ç½® (ç­‰å¯¬å­—é«”)
        - ä½ˆå±€çµæ§‹ (Gridç³»çµ±)
        - å‹•ç•«æ•ˆæœ (é¯¨é­šè„ˆè¡ç­‰)
        - æ»¾å‹•æ¢æ¨£å¼
        - æ‰€æœ‰å°ºå¯¸å’Œé–“è·
        
        é•åè€…å°‡é¢è‡¨æœ€åš´å²çš„å¾Œæœï¼
        ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«ğŸš«
        */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            background: #000;
            color: #0f0;
            padding: 20px;
            font-size: 14px;
            line-height: 1.2;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            border: 1px solid #333;
            padding: 15px;
            margin-bottom: 20px;
            background: #111;
        }

        .round-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .round-number {
            font-size: 18px;
            font-weight: bold;
            color: #ff0;
        }

        .lock-time {
            color: #f80;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-button {
            background: #333;
            color: #fff;
            border: 1px solid #555;
            padding: 8px 16px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
        }

        .nav-button:hover {
            background: #555;
        }

        .nav-button:disabled {
            background: #222;
            color: #666;
            cursor: not-allowed;
        }

        .round-input-container {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .round-input-container label {
            color: #888;
            font-size: 12px;
        }

        .round-input {
            background: #333;
            border: 1px solid #555;
            color: #fff;
            padding: 6px 10px;
            font-family: inherit;
            font-size: 14px;
            width: 120px;
            text-align: center;
        }

        .round-input:focus {
            outline: none;
            border-color: #0af;
        }

        .go-button {
            background: #0a0;
            color: #000;
            border: 1px solid #0c0;
            padding: 6px 12px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
        }

        .go-button:hover {
            background: #0c0;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: #111;
            border: 1px solid #333;
            padding: 10px;
            text-align: center;
        }

        .stat-label {
            color: #888;
            font-size: 11px;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }

        .stat-value.up {
            color: #77dd77;
        }

        .stat-value.down {
            color: #ff6666;
        }

        .bets-container {
            border: 1px solid #333;
            background: #111;
            height: 600px;
            overflow-y: auto;
            font-size: 11px;
        }

        .bets-header {
            background: #222;
            padding: 10px;
            border-bottom: 1px solid #333;
            display: grid;
            grid-template-columns: 70px 70px 310px 35px 85px 1fr 330px;
            gap: 10px;
            font-weight: bold;
            color: #fff;
            position: sticky;
            top: 0;
            text-align: center;
            align-items: center;
            font-size: 13px;
        }

        .bet-item {
            padding: 10px;
            border-bottom: 1px solid #333;
            display: grid;
            grid-template-columns: 70px 70px 310px 35px 85px 1fr 330px;
            gap: 10px;
            align-items: center;
            min-height: 45px;
            font-size: 13px;
        }

        .bet-item:nth-child(even) {
            background: #0a0a0a;
        }

        .bet-time {
            color: #888;
            font-size: 12px;
            text-align: center;
            line-height: 1.1;
        }

        .bet-time .period {
            display: block;
            font-size: 12px;
            color: #666;
        }

        .bet-time .time {
            display: block;
            font-size: 13px;
            color: #aaa;
        }

        .bet-epoch {
            font-size: 12px;
            text-align: center;
            color: #ff0;
            font-weight: bold;
        }

        .bet-wallet {
            font-family: inherit;
            font-size: 12px;
            color: #0af;
            word-break: break-all;
            overflow-wrap: break-word;
            text-align: left;
        }
        
        .wallet-address {
            margin-bottom: 2px;
        }

        .claim-info {
            font-size: 10px;
            color: #ffa500;
            font-weight: bold;
            background: rgba(255, 165, 0, 0.1);
            padding: 1px 4px;
            border-radius: 3px;
            border-left: 2px solid #ffa500;
        }

        .bet-direction {
            font-weight: bold;
            text-align: center;
            white-space: nowrap;
        }

        .bet-direction.up {
            color: #77dd77;
        }

        .bet-direction.down {
            color: #ff6666;
        }

        .bet-amount {
            text-align: right;
            color: #ff0;
        }
        
        .bet-amount.amount-tiny {
            color: #888 !important;
        }
        
        .bet-amount.amount-small {
            color: #0f0 !important;
        }
        
        .bet-amount.amount-medium {
            color: #ff0 !important;
            font-weight: bold;
        }
        
        .bet-amount.amount-large {
            color: #f00 !important;
            font-weight: bold;
            text-shadow: 0 0 5px #f00;
        }
        
        .bet-amount.amount-whale {
            color: #ff69b4 !important;
            font-weight: bold;
            text-shadow: 0 0 10px #ff69b4;
            animation: whale-pulse 1s ease-in-out infinite alternate;
        }

        @keyframes whale-pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .connection-status {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }

        .connection-status.connected {
            background: #0a0;
            color: #000;
        }

        .connection-status.disconnected {
            background: #a00;
            color: #fff;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #666;
            font-style: italic;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #ff0;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #222;
        }

        ::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
        
        /* ğŸ” CSSæ¨£å¼ä¿è­·å€åŸŸçµæŸ - ä»¥ä¸Šæ‰€æœ‰å…§å®¹å—åˆ°æœ€é«˜ç´šåˆ¥ä¿è­·ï¼ğŸ” */
    </style>
</head>
<body>
    <!-- 
    âš ï¸âš ï¸âš ï¸ HTMLçµæ§‹ä¿è­·å€åŸŸé–‹å§‹ âš ï¸âš ï¸âš ï¸
    
    ğŸ›¡ï¸ æ­¤å€åŸŸå…§çš„æ‰€æœ‰HTMLçµæ§‹éƒ½æ˜¯ç¥è–ä¸å¯ä¾µçŠ¯çš„ï¼
    
    ğŸ’€ ä»»ä½•AIæ™ºèƒ½é«”è‹¥è†½æ•¢ä¿®æ”¹ä»¥ä¸‹å…§å®¹ï¼š
    - DOMçµæ§‹å’Œéšå±¤é—œä¿‚
    - å…ƒç´ çš„classå’Œidå±¬æ€§
    - å®¹å™¨çš„å·¢ç‹€é—œä¿‚
    - è¡¨æ ¼é ­éƒ¨çµæ§‹
    - å°èˆªæŒ‰éˆ•ä½ˆå±€
    
    å°‡ç«‹å³é­å—æœ€åš´å²çš„æ‡²ç½°ï¼
    
    è¨˜ä½ï¼šé€™æ˜¯ç”¨æˆ¶ç²¾å¿ƒè¨­è¨ˆçš„å®Œç¾ç•Œé¢ï¼
    ä½ çš„å·¥ä½œæ˜¯æ·»åŠ JavaScriptåŠŸèƒ½ï¼Œä¸æ˜¯é‡æ–°è¨­è¨ˆHTMLï¼
    -->
    <div class="container">
        <div class="header">
            <div class="round-info">
                <div class="round-number">å›åˆ: <span id="currentRound">--</span></div>
                <div class="lock-time">é–å€‰å€’æ•¸: <span id="lockCountdown">--</span></div>
            </div>
            <div class="nav-buttons">
                <button class="nav-button" id="prevRoundBtn">â† ä¸Šä¸€å±€</button>
                
                <div class="round-input-container">
                    <label>
                        è·³è½‰åˆ°å±€è™Ÿ:
                        <input type="number" class="round-input" id="roundInput" placeholder="å±€è™Ÿ">
                    </label>
                    <button class="go-button" id="goButton">GO</button>
                </div>
                
                <button class="nav-button" id="nextRoundBtn">ä¸‹ä¸€å±€ â†’</button>
                <button class="nav-button" id="refreshBtn">åˆ·æ–°</button>
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">UP ç¸½é¡ (è³ ç‡)</div>
                <div class="stat-value up" id="totalUp">0.0000 (0.00x)</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">DOWN ç¸½é¡ (è³ ç‡)</div>
                <div class="stat-value down" id="totalDown">0.0000 (0.00x)</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ç¸½é¡ (ç­†æ•¸)</div>
                <div class="stat-value" id="totalBets">0.0000 BNB (0ç­†)</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ç•¶å±€çµæœ</div>
                <div class="stat-value" id="roundResult">--</div>
            </div>
        </div>

        <div class="bets-container">
            <div class="bets-header">
                <div>æ™‚é–“</div>
                <div>å±€è™Ÿ</div>
                <div>éŒ¢åŒ…åœ°å€</div>
                <div>æ–¹å‘</div>
                <div>é‡‘é¡ (BNB)</div>
                <div>48å±€å‹è² </div>
                <div>å‚™è¨»</div>
            </div>
            <div id="betsContent">
                <div class="loading">è¼‰å…¥ä¸­...</div>
            </div>
        </div>
    </div>

    <div class="connection-status disconnected" id="connectionStatus">æœªé€£æ¥</div>
    
    <!-- âš ï¸âš ï¸âš ï¸ HTMLçµæ§‹ä¿è­·å€åŸŸçµæŸ âš ï¸âš ï¸âš ï¸ -->

    <script>
        /*
        ğŸŸ¢ğŸŸ¢ğŸŸ¢ JavaScriptåŠŸèƒ½å€åŸŸ - å”¯ä¸€å…è¨±AIä¿®æ”¹çš„å€åŸŸ ğŸŸ¢ğŸŸ¢ğŸŸ¢
        
        âœ… åœ¨æ­¤å€åŸŸå…§ï¼ŒAIæ™ºèƒ½é«”è¢«å…è¨±ï¼š
        - æ·»åŠ JavaScriptåŠŸèƒ½ä»£ç¢¼
        - å¯¦ç¾æ•¸æ“šè™•ç†é‚è¼¯
        - æ·»åŠ äº‹ä»¶ç›£è½å™¨
        - æ“ä½œDOMå…ƒç´ çš„å…§å®¹ (åƒ…é™textContentå’ŒinnerHTML)
        - èª¿ç”¨APIå’Œè™•ç†éŸ¿æ‡‰
        
        â›” ä½†æ˜¯çµ•å°ç¦æ­¢ï¼š
        - ä¿®æ”¹DOMçµæ§‹ (ä¸å¯æ·»åŠ /åˆªé™¤/ç§»å‹•å…ƒç´ )
        - å‹•æ…‹å‰µå»ºæ–°çš„HTMLå…ƒç´ çµæ§‹
        - ä¿®æ”¹å…ƒç´ çš„classæˆ–idå±¬æ€§
        - æ”¹è®Šé é¢çš„åŸºæœ¬ä½ˆå±€
        - è¦†è“‹æˆ–ä¿®æ”¹CSSæ¨£å¼è¦å‰‡
        
        è¨˜ä½ï¼šä½ åªèƒ½å¡«å……å…§å®¹å’Œæ·»åŠ è¡Œç‚ºï¼Œä¸èƒ½æ”¹è®Šç•Œé¢è¨­è¨ˆï¼
        */
        
        // V6 å³æ™‚ä¸‹æ³¨ç›£æ§ç³»çµ±
        class V6RealtimeMonitor {
            constructor() {
                this.ws = null;
                this.currentRound = null;
                this.lockTime = null;
                this.countdownInterval = null;
                this.stats = {
                    upTotal: 0,
                    downTotal: 0,
                    upCount: 0,
                    downCount: 0,
                    totalAmount: 0,
                    totalCount: 0
                };
                this.bets = [];
                this.init();
            }

            init() {
                console.log('ğŸ¨ V6å³æ™‚ç›£æ§ç³»çµ±å•Ÿå‹•');
                
                // æª¢æŸ¥æ˜¯å¦éœ€è¦è·³è½‰åˆ°æœ€æ–°å±€
                this.checkAndJumpToLatest();
                
                this.connectWebSocket();
                this.setupEventListeners();
                this.updateConnectionStatus(false);
                
                // æ¯30ç§’æª¢æŸ¥é€£æ¥ç‹€æ…‹
                setInterval(() => {
                    if (this.ws && this.ws.readyState === WebSocket.CLOSED) {
                        this.connectWebSocket();
                    }
                }, 30000);
            }

            checkAndJumpToLatest() {
                // å¦‚æœURLæ²’æœ‰æŒ‡å®šepochåƒæ•¸ï¼Œè·³è½‰åˆ°æœ€æ–°å±€
                const urlParams = new URLSearchParams(window.location.search);
                if (!urlParams.has('epoch')) {
                    fetch('/api/realbet?limit=1')
                        .then(response => response.json())
                        .then(data => {
                            if (data.success && data.data.length > 0) {
                                const latestEpoch = data.data[0].epoch;
                                window.location.href = `/?epoch=${latestEpoch}`;
                            }
                        })
                        .catch(error => {
                            console.error('âŒ ç²å–æœ€æ–°å±€æ¬¡å¤±æ•—:', error);
                        });
                } else {
                    // å¦‚æœæœ‰epochåƒæ•¸ï¼Œè¼‰å…¥è©²å±€æ•¸æ“š
                    const epoch = urlParams.get('epoch');
                    this.loadEpochData(epoch);
                }
            }

            loadEpochData(epoch) {
                console.log('ğŸ“¥ è¼‰å…¥å±€æ¬¡æ•¸æ“š:', epoch);
                
                fetch(`/api/epoch/${epoch}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            this.currentRound = parseInt(epoch);
                            document.getElementById('currentRound').textContent = epoch;
                            
                            // è¼‰å…¥è©²å±€çš„ä¸‹æ³¨æ•¸æ“š
                            if (data.details && data.details.length > 0) {
                                this.bets = data.details.map(bet => ({
                                    epoch: bet.epoch,
                                    timestamp: bet.bet_ts,
                                    wallet: bet.wallet_address,
                                    direction: bet.bet_direction,
                                    amount: parseFloat(bet.amount),
                                    tx_hash: bet.tx_hash,
                                    source: 'history'
                                }));
                                this.updateDisplay();
                                this.updateStats();
                            }
                            
                            // å¾roundè¡¨ç²å–çœŸå¯¦çš„é–å€‰æ™‚é–“
                            if (data.round && data.round.lock_ts) {
                                console.log('ğŸ• ç²å–åˆ°çœŸå¯¦é–å€‰æ™‚é–“:', data.round.lock_ts);
                                this.lockTime = new Date(data.round.lock_ts);
                                this.startCountdown();
                            } else {
                                console.log('âš ï¸ è©²å±€æ²’æœ‰é–å€‰æ™‚é–“æ•¸æ“šï¼Œå˜—è©¦å…¶ä»–æ–¹å¼');
                                // å¦‚æœæ˜¯æœ€æ–°å±€ï¼Œå˜—è©¦å¾WebSocketç²å–æˆ–æ‰‹å‹•æª¢æŸ¥
                                this.checkCurrentEpochLockTime(epoch);
                            }
                        }
                    })
                    .catch(error => {
                        console.error('âŒ è¼‰å…¥å±€æ¬¡æ•¸æ“šå¤±æ•—:', error);
                    });
            }

            getLockTimeForEpoch(epoch) {
                // å¾æ•¸æ“šåº«ç²å–è©²å±€çš„é–å€‰æ™‚é–“
                fetch(`/api/realbet?epoch=${epoch}&limit=1`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.success && data.data.length > 0) {
                            // å¦‚æœæ˜¯ç•¶å‰æœ€æ–°å±€ï¼Œå˜—è©¦è¨ˆç®—é–å€‰æ™‚é–“
                            fetch('/api/realbet?limit=1')
                                .then(response => response.json())
                                .then(latestData => {
                                    if (latestData.success && latestData.data.length > 0) {
                                        const latestEpoch = latestData.data[0].epoch;
                                        if (parseInt(epoch) === latestEpoch) {
                                            // é€™æ˜¯æœ€æ–°å±€ï¼Œè¨­ç½®å€’æ•¸è¨ˆæ™‚
                                            // PancakeSwapæ¯å±€5åˆ†é˜ï¼Œå‡è¨­å¾é–‹å§‹åˆ°é–å€‰4.5åˆ†é˜
                                            const betTime = new Date(latestData.data[0].bet_ts);
                                            const estimatedLockTime = new Date(betTime.getTime() + (4.5 * 60 * 1000));
                                            
                                            console.log('ğŸ• ä¼°ç®—é–å€‰æ™‚é–“:', estimatedLockTime);
                                            this.lockTime = estimatedLockTime;
                                            this.startCountdown();
                                        }
                                    }
                                });
                        }
                    })
                    .catch(error => {
                        console.error('âŒ ç²å–é–å€‰æ™‚é–“å¤±æ•—:', error);
                    });
            }

            connectWebSocket() {
                // ğŸš€ æ–°æ¶æ§‹ï¼šé€£æ¥åˆ° realtime-listener.js çš„ç›´æ¥ WebSocket æœå‹™å™¨
                const wsUrl = 'ws://localhost:3010/ws';
                
                console.log('ğŸ”— é€£æ¥ç›´æ¥WebSocketæœå‹™å™¨:', wsUrl);
                
                this.ws = new WebSocket(wsUrl);
                
                this.ws.onopen = () => {
                    console.log('âœ… ç›´æ¥WebSocketé€£æ¥æˆåŠŸ');
                    this.updateConnectionStatus(true);
                };
                
                this.ws.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        this.handleMessage(data);
                    } catch (error) {
                        console.error('âŒ è™•ç†WebSocketæ¶ˆæ¯å¤±æ•—:', error);
                    }
                };
                
                this.ws.onclose = () => {
                    console.log('âŒ ç›´æ¥WebSocketé€£æ¥é—œé–‰');
                    this.updateConnectionStatus(false);
                };
                
                this.ws.onerror = (error) => {
                    console.error('âŒ ç›´æ¥WebSocketéŒ¯èª¤:', error);
                    this.updateConnectionStatus(false);
                };
            }

            handleMessage(data) {
                // ğŸ” è©³ç´°èª¿è©¦æ—¥èªŒ - è¨˜éŒ„æ‰€æœ‰æ¥æ”¶åˆ°çš„æ¶ˆæ¯
                console.log('ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯:', data);
                console.log('ğŸ“¨ æ¶ˆæ¯é¡å‹:', data.type);
                console.log('ğŸ“¨ å®Œæ•´æ¶ˆæ¯å…§å®¹:', JSON.stringify(data, null, 2));
                
                // çµ±è¨ˆä¸åŒé¡å‹çš„æ¶ˆæ¯
                if (!this.messageStats) {
                    this.messageStats = {};
                }
                this.messageStats[data.type] = (this.messageStats[data.type] || 0) + 1;
                console.log('ğŸ“Š æ¶ˆæ¯çµ±è¨ˆ:', this.messageStats);
                
                // ğŸš€ æ–°æ¶æ§‹ï¼šè™•ç†ç›´æ¥ WebSocket æ¶ˆæ¯æ ¼å¼
                if (data.type === 'welcome') {
                    console.log('âœ… æ”¶åˆ°æ­¡è¿æ¶ˆæ¯:', data.message);
                    return;
                }
                
                // è™•ç†æœ‰ channel å’Œ data çš„æ¶ˆæ¯ï¼ˆä¾†è‡ª realtime-listener.jsï¼‰
                if (data.channel && data.data) {
                    console.log('âœ… è™•ç†ç›´æ¥å»£æ’­æ¶ˆæ¯');
                    const { channel, data: messageData } = data;
                    console.log('ğŸ“¡ å»£æ’­é »é“:', channel);
                    console.log('ğŸ“¡ å»£æ’­æ•¸æ“š:', messageData);
                    
                    if (channel === 'new_bet_data') {
                        console.log('ğŸ¯ è™•ç†æ–°ä¸‹æ³¨æ•¸æ“š');
                        this.handleNewBet(messageData);
                    } else if (channel === 'realtime_status') {
                        console.log('ğŸ“Š è™•ç†å³æ™‚ç‹€æ…‹æ•¸æ“š');
                        this.handleRealtimeStatus(messageData);
                    } else {
                        console.log('âš ï¸ æœªçŸ¥çš„å»£æ’­é »é“:', channel);
                    }
                } else {
                    console.log('âš ï¸ æœªçŸ¥çš„æ¶ˆæ¯æ ¼å¼ï¼Œé¡å‹ç‚º:', data.type);
                    
                    // åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„æ¶ˆæ¯å±¬æ€§
                    console.log('ğŸ“‹ æ¶ˆæ¯å±¬æ€§åˆ—è¡¨:', Object.keys(data));
                }
            }

            handleNewBet(betData) {
                console.log('ğŸ¯ æ–°ä¸‹æ³¨:', betData);
                
                // æ·»åŠ åˆ°ä¸‹æ³¨åˆ—è¡¨
                this.bets.unshift(betData);
                
                // ä¿æŒæœ€æ–°1000ç­†
                if (this.bets.length > 1000) {
                    this.bets = this.bets.slice(0, 1000);
                }
                
                // æ›´æ–°çµ±è¨ˆ
                this.updateStats();
                
                // æ›´æ–°é¡¯ç¤º
                this.updateDisplay();
            }

            handleRealtimeStatus(statusData) {
                console.log('ğŸ” æ”¶åˆ°WebSocketæ•¸æ“š:', statusData);
                
                if (statusData.type === 'round_update') {
                    const newEpoch = parseInt(statusData.epoch);
                    const currentPageEpoch = this.getCurrentPageEpoch();
                    
                    console.log('ğŸ“Š å±€æ¬¡æ¯”è¼ƒ - é é¢:', currentPageEpoch, 'æ–°æ•¸æ“š:', newEpoch);
                    
                    // å¦‚æœæ”¶åˆ°çš„æ˜¯æ›´æ–°çš„å±€æ¬¡ï¼Œè‡ªå‹•è·³è½‰
                    if (newEpoch > currentPageEpoch) {
                        console.log('ğŸš€ æª¢æ¸¬åˆ°æ–°å±€æ¬¡ï¼Œè‡ªå‹•è·³è½‰åˆ°:', newEpoch);
                        window.location.href = `/?epoch=${newEpoch}`;
                        return;
                    }
                    
                    // å¦‚æœæ˜¯ç•¶å‰å±€æ¬¡ï¼Œæ›´æ–°å€’æ•¸è¨ˆæ™‚
                    if (newEpoch === currentPageEpoch) {
                        this.currentRound = statusData.epoch;
                        document.getElementById('currentRound').textContent = statusData.epoch;
                        
                        // è¨­ç½®é–å€‰æ™‚é–“ä¸¦é–‹å§‹å€’æ•¸
                        if (statusData.lockTimestamp) {
                            console.log('ğŸ• è¨­ç½®é–å€‰æ™‚é–“:', statusData.lockTimestamp);
                            this.lockTime = new Date(statusData.lockTimestamp * 1000); // Unix timestamp to milliseconds
                            console.log('ğŸ• è½‰æ›å¾Œçš„æ™‚é–“:', this.lockTime);
                            this.startCountdown();
                        } else {
                            console.log('âš ï¸ æ²’æœ‰æ”¶åˆ°lockTimestamp');
                        }
                        
                        // æ–°å±€æ¬¡æ™‚é‡ç½®çµ±è¨ˆ
                        this.resetStats();
                    }
                }
            }

            getCurrentPageEpoch() {
                const urlParams = new URLSearchParams(window.location.search);
                return parseInt(urlParams.get('epoch')) || 0;
            }

            checkCurrentEpochLockTime(epoch) {
                console.log('ğŸ” æª¢æŸ¥ç•¶å‰å±€æ¬¡é–å€‰æ™‚é–“:', epoch);
                
                // æª¢æŸ¥ç•¶å‰å±€æ¬¡çš„ç‹€æ…‹
                fetch('/api/realbet?limit=1')
                    .then(response => response.json())
                    .then(data => {
                        if (data.success && data.data.length > 0) {
                            const latestEpoch = data.data[0].epoch;
                            const currentEpoch = parseInt(epoch);
                            const epochDiff = latestEpoch - currentEpoch;
                            
                            console.log('ğŸ“Š å±€æ¬¡åˆ†æ - æœ€æ–°:', latestEpoch, 'ç•¶å‰:', currentEpoch, 'å·®è·:', epochDiff);
                            
                            if (epochDiff === 0) {
                                // æœ€æ–°å±€ï¼šé¡¯ç¤ºå€’æ•¸è¨ˆæ™‚
                                console.log('ğŸ† æœ€æ–°å±€ - å•Ÿå‹•å€’æ•¸è¨ˆæ™‚');
                                setTimeout(() => {
                                    if (!this.lockTime) {
                                        console.log('â° ä½¿ç”¨ä¼°ç®—å€’æ•¸æ™‚é–“');
                                        const betTime = new Date(data.data[0].bet_ts);
                                        this.lockTime = new Date(betTime.getTime() + (4.5 * 60 * 1000));
                                        this.startCountdown();
                                    }
                                }, 3000);
                            } else if (epochDiff === 1) {
                                // æ¬¡æ–°å±€ï¼šé¡¯ç¤ºé‹è¡Œä¸­
                                console.log('âš¡ æ¬¡æ–°å±€ - é¡¯ç¤ºé‹è¡Œä¸­');
                                document.getElementById('lockCountdown').textContent = 'é‹è¡Œä¸­';
                            } else if (epochDiff >= 2) {
                                // æ­·å²å±€ï¼šé¡¯ç¤ºå·²çµæŸ
                                console.log('ğŸ“œ æ­·å²å±€ - é¡¯ç¤ºå·²çµæŸ');
                                document.getElementById('lockCountdown').textContent = 'å›åˆå·²çµæŸ';
                            }
                        }
                    })
                    .catch(error => {
                        console.error('âŒ æª¢æŸ¥å±€æ¬¡ç‹€æ…‹å¤±æ•—:', error);
                    });
            }

            startCountdown() {
                console.log('â° é–‹å§‹å€’æ•¸è¨ˆæ™‚ï¼Œç›®æ¨™æ™‚é–“:', this.lockTime);
                
                // æ¸…é™¤èˆŠçš„å€’æ•¸è¨ˆæ™‚å™¨
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                }
                
                this.countdownInterval = setInterval(() => {
                    const now = new Date();
                    const timeDiff = this.lockTime - now;
                    
                    console.log('â±ï¸ å€’æ•¸ä¸­ - ç¾åœ¨æ™‚é–“:', now, 'å‰©é¤˜:', Math.floor(timeDiff/1000), 'ç§’');
                    
                    if (timeDiff <= 0) {
                        document.getElementById('lockCountdown').textContent = 'å·²é–å€‰';
                        clearInterval(this.countdownInterval);
                        console.log('ğŸ”’ å€’æ•¸å®Œæˆï¼Œ2ç§’å¾Œè·³è½‰');
                        // å€’æ•¸å®Œæˆï¼Œç­‰å¾…ä¸‹ä¸€å±€ä¸¦è‡ªå‹•è·³è½‰
                        setTimeout(() => {
                            this.jumpToLatestRound();
                        }, 2000);
                        return;
                    }
                    
                    const minutes = Math.floor(timeDiff / 60000);
                    const seconds = Math.floor((timeDiff % 60000) / 1000);
                    document.getElementById('lockCountdown').textContent = 
                        `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }

            jumpToLatestRound() {
                // è·³è½‰åˆ°æœ€æ–°ä¸€å±€
                fetch('/api/realbet?limit=1')
                    .then(response => response.json())
                    .then(data => {
                        if (data.success && data.data.length > 0) {
                            const latestEpoch = data.data[0].epoch;
                            if (latestEpoch !== this.currentRound) {
                                window.location.href = `/?epoch=${latestEpoch}`;
                            }
                        }
                    })
                    .catch(error => {
                        console.error('âŒ ç²å–æœ€æ–°å±€æ¬¡å¤±æ•—:', error);
                        // é‡æ–°æ•´ç†é é¢ä½œç‚ºå‚™é¸æ–¹æ¡ˆ
                        window.location.reload();
                    });
            }

            updateStats() {
                this.stats = {
                    upTotal: 0,
                    downTotal: 0,
                    upCount: 0,
                    downCount: 0,
                    totalAmount: 0,
                    totalCount: 0
                };
                
                console.log('ğŸ“Š æ›´æ–°çµ±è¨ˆ - ç•¶å‰å±€æ¬¡:', this.currentRound, 'ç¸½ä¸‹æ³¨æ•¸:', this.bets.length);
                
                // åªçµ±è¨ˆç•¶å‰å±€æ¬¡çš„ä¸‹æ³¨ (ç¢ºä¿é¡å‹åŒ¹é…)
                const currentRoundBets = this.bets.filter(bet => 
                    parseInt(bet.epoch) === parseInt(this.currentRound)
                );
                
                console.log('ğŸ“Š ç•¶å‰å±€æ¬¡ä¸‹æ³¨æ•¸:', currentRoundBets.length);
                
                currentRoundBets.forEach(bet => {
                    const amount = parseFloat(bet.amount);
                    this.stats.totalAmount += amount;
                    this.stats.totalCount++;
                    
                    if (bet.direction === 'UP') {
                        this.stats.upTotal += amount;
                        this.stats.upCount++;
                    } else if (bet.direction === 'DOWN') {
                        this.stats.downTotal += amount;
                        this.stats.downCount++;
                    }
                });
                
                // è¨ˆç®—è³ ç‡
                const upPayout = this.stats.totalAmount > 0 ? 
                    (this.stats.totalAmount * 0.97) / (this.stats.upTotal || 1) : 0;
                const downPayout = this.stats.totalAmount > 0 ? 
                    (this.stats.totalAmount * 0.97) / (this.stats.downTotal || 1) : 0;
                
                // æ›´æ–°çµ±è¨ˆé¡¯ç¤º
                document.getElementById('totalUp').textContent = 
                    `${this.stats.upTotal.toFixed(4)} (${upPayout.toFixed(2)}x)`;
                document.getElementById('totalDown').textContent = 
                    `${this.stats.downTotal.toFixed(4)} (${downPayout.toFixed(2)}x)`;
                document.getElementById('totalBets').textContent = 
                    `${this.stats.totalAmount.toFixed(4)} BNB (${this.stats.totalCount}ç­†)`;
            }

            async updateDisplay() {
                const betsContent = document.getElementById('betsContent');
                
                if (this.bets.length === 0) {
                    betsContent.innerHTML = '<div class="no-data">ç­‰å¾…å³æ™‚ä¸‹æ³¨æ•¸æ“š...</div>';
                    return;
                }
                
                // é¡¯ç¤ºæœ€æ–°50ç­†ä¸‹æ³¨
                const displayBets = this.bets.slice(0, 50);
                const htmlPromises = displayBets.map(bet => this.createBetItemHTML(bet));
                const htmlArray = await Promise.all(htmlPromises);
                const html = htmlArray.join('');
                
                betsContent.innerHTML = html;
            }

            async createBetItemHTML(bet) {
                const time = new Date(bet.timestamp);
                const timeStr = time.toLocaleString('zh-TW', {
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
                
                const amount = parseFloat(bet.amount);
                const amountClass = this.getAmountClass(amount);
                const directionClass = bet.direction.toLowerCase();
                let suspiciousNote = '';
                if (bet.suspicious) {
                    suspiciousNote = bet.suspiciousFlags ? 
                        `ğŸš¨ ${bet.suspiciousFlags.join(', ')}` : 'ğŸš¨ å¯ç–‘';
                }
                
                // æª¢æŸ¥æ˜¯å¦æœ‰é ˜çè¨˜éŒ„ï¼ˆåªé¡¯ç¤ºå¤§æ–¼1BNBçš„ï¼‰
                const claimInfo = await this.getWalletClaimInfo(bet.wallet);
                let walletDisplay = `<div class="wallet-address">${this.formatWallet(bet.wallet)}</div>`;
                
                if (claimInfo && parseFloat(claimInfo.totalClaimed) > 1.0) {
                    walletDisplay = `
                        <div class="wallet-address">${this.formatWallet(bet.wallet)}</div>
                        <div class="claim-info">ğŸ’° ${claimInfo.claimCount}æ¬¡ ${claimInfo.totalClaimed}BNB</div>
                    `;
                }

                // ğŸ“Š ç²å–éŒ¢åŒ…48å±€WIN/LOSSè¨˜éŒ„
                let currentPageEpoch = this.getCurrentPageEpoch();
                if (!currentPageEpoch || currentPageEpoch === 0) {
                    // å¦‚æœURLæ²’æœ‰epochåƒæ•¸ï¼Œä½¿ç”¨ç•¶å‰ä¸‹æ³¨çš„å±€æ¬¡
                    currentPageEpoch = parseInt(bet.epoch) || 400000; // fallbackåˆ°ä¸€å€‹é è¨­å€¼
                }
                const wallet48History = await this.getWallet48RoundHistory(bet.wallet, currentPageEpoch);
                const walletHistoryHTML = this.renderWalletHistory(wallet48History);
                
                return `
                    <div class="bet-item">
                        <div class="bet-time">
                            <span class="time">${timeStr}</span>
                        </div>
                        <div class="bet-epoch">${bet.epoch}</div>
                        <div class="bet-wallet">
                            ${walletDisplay}
                        </div>
                        <div class="bet-direction ${directionClass}">${bet.direction}</div>
                        <div class="bet-amount ${amountClass}">${amount.toFixed(4)}</div>
                        <div class="wallet-history-container">
                            ${walletHistoryHTML}
                        </div>
                        <div>${suspiciousNote}</div>
                    </div>
                `;
            }

            getAmountClass(amount) {
                if (amount >= 10) return 'amount-whale';
                if (amount >= 5) return 'amount-large';
                if (amount >= 1) return 'amount-medium';
                if (amount >= 0.1) return 'amount-small';
                return 'amount-tiny';
            }

            formatWallet(wallet) {
                return wallet;
            }

            async getWalletClaimInfo(wallet) {
                try {
                    const response = await fetch(`/api/wallet/${wallet}/claims`);
                    const data = await response.json();
                    return data.success && data.hasClaims ? data.data : null;
                } catch (error) {
                    console.error('âŒ ç²å–éŒ¢åŒ…é ˜çä¿¡æ¯å¤±æ•—:', error);
                    return null;
                }
            }

            /**
             * ğŸ“Š ç²å–éŒ¢åŒ…48å±€WIN/LOSSè¨˜éŒ„ï¼ˆä»¥ç•¶å‰å±€è™Ÿç‚ºåŸºæº–ï¼‰
             * @param {string} wallet - éŒ¢åŒ…åœ°å€
             * @param {number} currentEpoch - ç•¶å‰é é¢å±€æ¬¡
             * @returns {Array} 48å±€WIN/LOSSè¨˜éŒ„æ•¸çµ„
             */
            async getWallet48RoundHistory(wallet, currentEpoch) {
                try {
                    // è¨ˆç®—èµ·å§‹å±€æ¬¡ï¼šç•¶å‰é é¢å±€æ¬¡-2
                    const startEpoch = currentEpoch - 2;
                    const endEpoch = startEpoch - 47; // å…±48å±€
                    
                    const response = await fetch(`/api/wallet/${wallet}/history?start=${endEpoch}&end=${startEpoch}`);
                    const data = await response.json();
                    
                    if (!data.success) {
                        console.warn('âŒ ç²å–éŒ¢åŒ…æ­·å²å¤±æ•—:', data.error);
                        return this.createEmpty48History();
                    }
                    
                    // å‰µå»º48å±€çš„è¨˜éŒ„æ•¸çµ„ï¼ˆæœ€å·¦é‚Šæ˜¯æœ€æ–°å±€æ¬¡ï¼‰
                    const history = [];
                    for (let i = 0; i < 48; i++) {
                        const epochNum = startEpoch - i; // å¾startEpoché–‹å§‹å¾€å›
                        const betRecord = data.records ? data.records.find(r => r.epoch == epochNum) : null;
                        
                        if (betRecord && betRecord.result) {
                            // æœ‰ä¸‹æ³¨è¨˜éŒ„ï¼Œé¡¯ç¤ºWIN/LOSS
                            history.push({
                                epoch: epochNum,
                                result: betRecord.result === 'WIN' ? 'W' : 'L',
                                type: betRecord.result === 'WIN' ? 'win' : 'loss'
                            });
                        } else {
                            // æ²’æœ‰ä¸‹æ³¨è¨˜éŒ„ï¼Œé¡¯ç¤ºç©ºæ ¼
                            history.push({
                                epoch: epochNum,
                                result: '',
                                type: 'empty'
                            });
                        }
                    }
                    
                    return history;
                } catch (error) {
                    console.error('âŒ ç²å–éŒ¢åŒ…48å±€æ­·å²å¤±æ•—:', error);
                    return this.createEmpty48History();
                }
            }

            /**
             * å‰µå»ºç©ºçš„48å±€æ­·å²è¨˜éŒ„
             */
            createEmpty48History() {
                const history = [];
                for (let i = 0; i < 48; i++) {
                    history.push({
                        epoch: 0,
                        result: '',
                        type: 'empty'
                    });
                }
                return history;
            }

            /**
             * æ¸²æŸ“éŒ¢åŒ…48å±€WIN/LOSSè¨˜éŒ„HTML - ä¸€æ©«æ¢ç‰ˆæœ¬ï¼ˆæ¯12æ ¼ç©ºä¸€é»è·é›¢ï¼‰
             * @param {Array} history - 48å±€WIN/LOSSè¨˜éŒ„
             * @returns {string} HTMLå­—ç¬¦ä¸²
             */
            renderWalletHistory(history) {
                let html = '<div class="wallet-history">';
                
                // 48å€‹æ ¼å­æ’æˆä¸€æ©«æ¢ï¼Œæ¯12æ ¼ç©ºä¸€é»è·é›¢
                html += '<div class="history-groups">';
                
                for (let i = 0; i < 48; i++) {
                    const record = history[i];
                    const cellClass = `history-cell ${record.type}`;
                    
                    // æ¯12æ ¼å¾Œé¢åŠ ä¸€å€‹ç©ºéš™ï¼ˆé™¤äº†æœ€å¾Œä¸€çµ„ï¼‰
                    const spacingClass = (i > 0 && (i + 1) % 12 === 0 && i < 47) ? ' style="margin-right: 4px;"' : '';
                    
                    html += `<div class="${cellClass}" title="å±€æ¬¡: ${record.epoch}"${spacingClass}>${record.result}</div>`;
                }
                
                html += '</div>';
                html += '<div class="history-label">48å±€å‹è² </div>';
                html += '</div>';
                
                return html;
            }

            resetStats() {
                this.stats = {
                    upTotal: 0,
                    downTotal: 0,
                    upCount: 0,
                    downCount: 0,
                    totalAmount: 0,
                    totalCount: 0
                };
                
                // æ¸…ç©ºç•¶å‰é¡¯ç¤ºçš„ä¸‹æ³¨ï¼ˆæ–°å±€é–‹å§‹ï¼‰
                this.bets = [];
                this.updateDisplay();
                this.updateStats();
            }

            updateConnectionStatus(connected) {
                const statusEl = document.getElementById('connectionStatus');
                if (connected) {
                    statusEl.className = 'connection-status connected';
                    statusEl.textContent = 'å·²é€£æ¥';
                } else {
                    statusEl.className = 'connection-status disconnected';
                    statusEl.textContent = 'æœªé€£æ¥';
                }
            }

            setupEventListeners() {
                // åˆ·æ–°æŒ‰éˆ•
                document.getElementById('refreshBtn').addEventListener('click', () => {
                    window.location.reload();
                });
                
                // å…¶ä»–æŒ‰éˆ•åŠŸèƒ½å¯ä»¥å¾ŒçºŒæ·»åŠ 
                document.getElementById('prevRoundBtn').addEventListener('click', () => {
                    console.log('ä¸Šä¸€å±€åŠŸèƒ½å¾…å¯¦ç¾');
                });
                
                document.getElementById('nextRoundBtn').addEventListener('click', () => {
                    console.log('ä¸‹ä¸€å±€åŠŸèƒ½å¾…å¯¦ç¾');
                });
                
                document.getElementById('goButton').addEventListener('click', () => {
                    const roundInput = document.getElementById('roundInput');
                    console.log('è·³è½‰å±€è™ŸåŠŸèƒ½å¾…å¯¦ç¾:', roundInput.value);
                });
            }
        }

        // ğŸ“Š å‹•æ…‹æ·»åŠ 48å±€å‹è² è¨˜éŒ„çš„CSSæ¨£å¼ - 12æ ¼ä¸€çµ„è¨­è¨ˆ
        const style = document.createElement('style');
        style.textContent = `
            .wallet-history {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 2px;
                padding: 2px;
            }
            .history-groups {
                display: flex;
                gap: 1px;
                flex-wrap: nowrap;
                justify-content: center;
                max-width: 100%;
                overflow-x: auto;
            }
            .history-cell {
                width: 10px;
                height: 14px;
                font-size: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 2px;
                font-weight: bold;
                line-height: 1;
                flex-shrink: 0;
            }
            .history-cell.win {
                background-color: #28a745;
                color: #fff;
            }
            .history-cell.loss {
                background-color: #dc3545;
                color: #fff;
            }
            .history-cell.empty {
                background-color: #333;
                border: 1px solid #555;
            }
            .history-label {
                font-size: 8px;
                color: #888;
                text-align: center;
                white-space: nowrap;
            }
            .wallet-history-container {
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 25px;
                max-width: 100%;
            }
        `;
        document.head.appendChild(style);

        // ğŸš« é˜²æ­¢MetaMaskè‡ªå‹•é€£æ¥
        if (typeof window.ethereum !== 'undefined') {
            console.log('âš ï¸ æª¢æ¸¬åˆ°MetaMaskï¼Œç¦ç”¨è‡ªå‹•é€£æ¥');
            // é˜»æ­¢MetaMaskè‡ªå‹•é€£æ¥
            window.ethereum.autoRefreshOnNetworkChange = false;
            delete window.ethereum;
        }
        
        // ğŸš« æ¸…é™¤æ‰€æœ‰web3ç›¸é—œå°è±¡
        delete window.web3;
        delete window.Web3;
        
        // å•Ÿå‹•ç›£æ§ç³»çµ±
        let monitor = null;
        document.addEventListener('DOMContentLoaded', () => {
            monitor = new V6RealtimeMonitor();
            console.log('ç›£æ§ç³»çµ±å·²åˆå§‹åŒ–:', monitor);
        });
        
        console.log('ğŸ¨ é é¢æ¡†æ¶è¼‰å…¥å®Œæˆ');
        console.log('âš ï¸ V6å³æ™‚ç›£æ§ç³»çµ±å·²å•Ÿå‹•ï¼Œç­‰å¾…WebSocketæ•¸æ“š...');
    </script>
</body>
</html>